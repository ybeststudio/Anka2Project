if pc . get_map_index ( ) >= 3.55e+06 and pc . get_map_index ( ) <= 3.55999e+06 then if d . select ( pc . get_map_index ( ) ) then 
if d . getf ( "DungeonBlock" ) == 0 or d . getf ( "Complete" ) == 1 then 
pc . setf ( "shipdefense" , "map" , 0 ) 
pc . setf ( "shipdefense" , "time" , 0 ) 
pc . setf ( "shipdefense" , "channel" , 0 ) 
else 
pc . setf ( "shipdefense" , "channel" , pc . get_channel_id ( ) ) 
pc . setf ( "shipdefense" , "map" , d . get_map_index ( ) ) 
pc . setf ( "shipdefense" , "time" , get_global_time ( ) + 15 * 60 ) 
end 
end 
 return end 